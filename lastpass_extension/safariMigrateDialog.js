var SafariMigrateDialog=function(t,e,i,n){"use strict";var o=function(t){i.call(this,t,{closeButtonEnabled:!0,maximizeButtonEnabled:!1,dynamicHeight:!0,hideHeader:!0,hideButtons:!0,confirmOnClose:!1,buttonsInsideContent:!0,isModal:!1}),o.prototype._options=null};function s(t,e,i,n,o){var s=0;switch(t){case"top":case"left":s=e?i:i+n;break;case"right":case"bottom":s=e?i+n-o:i-o}return s}function a(t,e,i,n,o){var s=0;switch(t){case"top":case"left":s=e;break;case"right":case"bottom":s=e+i-o;break;case"center":default:s=n-Math.round(o/2)}return s}return o.prototype=Object.create(i.prototype),o.prototype.constructor=o,o.prototype.createButton=function(e,i,n,o){if(e&&i){var s=i.style||"",a=i.sizeStyle||"col-6",r=t("<div></div>").addClass(a).append(t("<button></button>").text(i.text).data("index",n).addClass("btn-base radius-sm "+s).off().on("click",o));e.append(r)}},o.prototype.setup=function(n,o){if(o){var s=this;s._options={};var a=s.$element.find(".buttons").empty();s.$element.removeClass().addClass("dialog responsive intro-tour-dialog tour-welcome-step"),s._options.buttons=[{style:"btn-blue",sizeStyle:"col-2 btn-container-lg",text:e.translateString("Update"),action:"learn"}];for(var r=0;r<s._options.buttons.length;r++){this.createButton(a,s._options.buttons[r],r,function(e){e.preventDefault();var i=t(e.target).data("index");if(t.isNumeric(i)&&i>=0&&i<s._options.buttons.length){var n=s._options.buttons[i];n.action&&s.executeAction(n.action)}})}var l=n.find("#btnClose");if(s._options.hideXCloseBtn)l.hide();else{l.off().on("click",function(t){s.close(!0)})}this.setText(e.translateString("Safari extension update required"),this.$element.find("#mainTitle")),this.setText(e.translateString("Due to new Apple requirements, you need to download the new LastPass app to continue using LastPass in your Safari browser."),this.$element.find("#contentText1")),this.setText(e.translateString("After download, simply login to your account again and use LastPass in Safari as you always have."),this.$element.find("#contentText2")),i.prototype.setup.apply(this,arguments),this._options.position={targetId:"#header",align:"left",orientation:"top",fillWidth:"#main"},this.setSize(this._options.position),this.setPosition(this._options.position),this.subscribeToWindowResize(),t("#vault").addClass("tour-overrides")}},o.prototype.executeAction=function(t){switch(t){case"close":this.close(!0);break;case"learn":LPPlatform.openURL("https://lastpass.com/safariAppExtension.php?source=vault")}},o.prototype.setText=function(t,e){t&&e?e.text(t).show():e.hide()},o.prototype.setPosition=function(e){e.dialogPosition=null,e&&e.targetId&&(e.$targetEl=t(e.targetId),e.targetDimensions=this.getDimensions(e.$targetEl),e.dialogPosition=this.computeDialogPosition(this.$element,e)),e.dialogPosition&&this.$element.offset(e.dialogPosition)},o.prototype.setSize=function(e){if(e){e.$targetEl=t(e.targetId);var i,n=this.getDimensions(e.$targetEl);e.fillWidth?(i=t(e.fillWidth))&&i.length>0?this.$element.width(i.width()):this.$element.width(n.width):this.$element.css("width",""),e.fillHeight?(i=t(e.fillHeight))&&i.length>0?this.$element.height(i.height()):this.$element.height(n.height):this.$element.css("height","")}},o.prototype.subscribeToWindowResize=function(){var t=this;t.positionAndResizeHandler=function(){t.setSize(t._options.position),t.setPosition(t._options.position)},window&&window.addEventListener("resize",t.positionAndResizeHandler),n.get(n.VAULT_LEFT_MENU_TOGGLE).subscribe(t.positionAndResizeHandler),n.get(n.EMPTY_VAULT_STATE_CHANGE).subscribe(t.positionAndResizeHandler)},o.prototype.unSubscribeToWindowResize=function(){var t=this;"function"==typeof t.positionAndResizeHandler&&(n.get(n.VAULT_LEFT_MENU_TOGGLE).unsubscribe(t.positionAndResizeHandler),n.get(n.EMPTY_VAULT_STATE_CHANGE).unsubscribe(t.positionAndResizeHandler),window&&(window.removeEventListener&&window.removeEventListener("resize",t.positionAndResizeHandler),t.positionAndResizeHandler=null))},o.prototype.computeDialogPosition=function(t,e){if(t&&t.length>0&&e&&e.$targetEl.length>0){var i=e.arrowPosition?15:0;e.dialogDimensions=this.getDimensions(t);var n={top:0,left:0},o=e.align||"center";switch(e.orientation){case"top":n.left=a(o,e.targetDimensions.left,e.targetDimensions.width,e.targetDimensions.center.left,e.dialogDimensions.width),n.top=s(e.orientation,e.inside,e.targetDimensions.top,e.targetDimensions.height,e.dialogDimensions.height)+i;break;case"bottom":n.left=a(o,e.targetDimensions.left,e.targetDimensions.width,e.targetDimensions.center.left,e.dialogDimensions.width),n.top=s(e.orientation,e.inside,e.targetDimensions.top,e.targetDimensions.height,e.dialogDimensions.height)-i;break;case"left":n.top=a(o,e.targetDimensions.top,e.targetDimensions.height,e.targetDimensions.center.top,e.dialogDimensions.height),n.left=s(e.orientation,e.inside,e.targetDimensions.left,e.targetDimensions.width,e.dialogDimensions.width)+i;break;case"right":n.top=a(o,e.targetDimensions.top,e.targetDimensions.height,e.targetDimensions.center.top,e.dialogDimensions.height),n.left=s(e.orientation,e.inside,e.targetDimensions.left,e.targetDimensions.width,e.dialogDimensions.width)-i}return e.offset&&(n.top+=e.offset.top,n.left+=e.offset.left),n}return null},o.prototype.getDimensions=function(e){if(e&&e.length>0){var i=t.extend({height:e.height(),width:e.width()},e.offset());return i.center={top:Math.round(i.top+i.height/2),left:Math.round(i.left+i.width/2)},i}return null},o.prototype.close=function(e){e&&(t("#vault").removeClass("tour-overrides"),i.prototype.close.apply(this,arguments),this.unSubscribeToWindowResize())},o.prototype.showBlurOverlay=function(){},o.prototype.hideBlurOverlay=function(){},o.prototype.closeOnSuccess=function(){},o.prototype.getZIndex=function(){var t=this.$element.css("z-index");if("auto"===t)return 0;var e=parseInt(t);return e<8?8:e},o}(jQuery,Strings,Dialog,Topics);
//# sourceMappingURL=sourcemaps/safariMigrateDialog.js.map
